<div class="container-fluid">
  <div class="row">
    <div class="col-xs-12">
      <div id="banner">
        <div class="text-center">
          <%= image_tag "apron.svg" %>
          <!-- <h1>Fabily</h1> -->
          <br />
          <p id="catch">Need a prototype ?</p>
          <p>Find the right machine at the right cost</p>
          <br />
        </div>
      </div>
      <div id="search">
      <!-- <div class="text-center bg-greyish small-padded"> -->
        <%= render 'shared/autocompleteform' %>
      </div>
    </div>
  </div>
</div>
<div id="map" style="width: 100%; height: 300px;"></div>


<% content_for(:after_js) do %>
  <script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyCDkFnlVcP8Dod8Eeil9fZmWKxQdC13Uew">
  </script>
  <%= javascript_tag do %>
    $(document).on('ready', function() {
      google.maps.event.addDomListener(window, 'load', function() {
        initializeAutocomplete('user_input_autocomplete_address');
      });
      var handler = Gmaps.build('Google');
      handler.buildMap({ internal: { id: 'map' } }, function(){
        markers = handler.addMarkers(<%= raw @markers.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
    })
  <% end %>
<% end %>
